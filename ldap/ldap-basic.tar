ldap-basic/�����������������������������������������������������������������������������������������0000777�0000000�0000000�00000000000�14326304475�007757� 5����������������������������������������������������������������������������������������������������ustar  ��������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������ldap-basic/01-ldap-basic-namespace.yml��������������������������������������������������������������0000777�0000000�0000000�00000000164�13640742343�014653� 0����������������������������������������������������������������������������������������������������ustar  ��������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������---
apiVersion: v1
kind: Namespace
metadata:
  name: ldap-basic
  labels:
    name: "Namespace_For_basic_LDAP_work"
������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������ldap-basic/02-openldap-configmap.yml����������������������������������������������������������������0000777�0000000�0000000�00000007415�14322067042�014466� 0����������������������������������������������������������������������������������������������������ustar  ��������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������apiVersion: v1
kind: ConfigMap
metadata:
  name: openldap-bootstrap
data:
  bootstrap.ldif: |
    version: 1

    dn: ou=users,dc=acme,dc=com
    objectClass: top
    objectClass: organizationalUnit
    ou: users

    dn: uid=sasdemo,ou=users,dc=acme,dc=com
    objectClass: posixAccount
    objectClass: person
    objectClass: organizationalPerson
    objectClass: inetOrgPerson
    objectClass: top
    cn: sasdemo
    gidNumber: 5000
    homeDirectory: /home/sasdemo
    sn: Demo User
    uid: sasdemo
    uidNumber: 5001
    description: sasdemo is a ldap account.
    displayName: SAS Demo User
    givenName: SAS Demo User
    l: Cary
    mail: sasdemo@acme.com
    mobile: 555-555-5556
    o: ACME
    postalCode: 27513
    st: NC
    street: PO BOX 55555
    telephoneNumber: 555-555-5555
    title: Mr. SAS Demo
    userPassword:: e1NTSEF9eitmMFFrTFN4OTd6OFpnN2tIU0l6RVZzTkt5Wnppa3M=

    dn: uid=sasadm,ou=users,dc=acme,dc=com
    objectClass: posixAccount
    objectClass: person
    objectClass: organizationalPerson
    objectClass: inetOrgPerson
    objectClass: top
    cn: sasadm
    mail: sasadm@acme.com
    sn: Admin User
    uid: sasadm
    gidNumber: 5000
    homeDirectory: /home/sasadm
    uidNumber: 5002
    description: sasadm is a ldap account.
    displayName: SAS Admin User
    givenName: SAS Admin User
    l: Cary
    mobile: 555-555-5558
    o: ACME
    postalCode: 27513
    st: NC
    street: PO BOX 55555
    telephoneNumber: 555-555-5555
    title: Mr. SAS Admin
    userPassword:: e1NTSEF9eitmMFFrTFN4OTd6OFpnN2tIU0l6RVZzTkt5Wnppa3M=

    dn: uid=sastest1,ou=users,dc=acme,dc=com
    objectClass: posixAccount
    objectClass: person
    objectClass: organizationalPerson
    objectClass: inetOrgPerson
    objectClass: top
    cn: sastest1
    mail: sastest1@acme.com
    sn: TEST1
    uid: sastest1
    gidNumber: 5000
    homeDirectory: /home/sastest1
    uidNumber: 5005
    description: sastest1 is a ldap service account.
    displayName: SAS TEST1 User
    givenName: SAS TEST1 User
    l: Cary
    mobile: 555-555-5558
    o: ACME
    postalCode: 27513
    st: NC
    street: PO BOX 55555
    telephoneNumber: 555-555-5555
    title: Mr. SAS Test1
    userPassword:: e1NTSEF9eitmMFFrTFN4OTd6OFpnN2tIU0l6RVZzTkt5Wnppa3M=

    dn: uid=sastest2,ou=users,dc=acme,dc=com
    objectClass: posixAccount
    objectClass: person
    objectClass: organizationalPerson
    objectClass: inetOrgPerson
    objectClass: top
    cn: sastest2
    mail: sastest2@acme.com
    sn: TEST2
    uid: sastest2
    gidNumber: 5000
    homeDirectory: /home/sastest2
    uidNumber: 5006
    description: sastest2 is a ldap service account.
    displayName: SAS TEST2 User
    givenName: SAS TEST2 User
    l: Cary
    mobile: 555-555-5558
    o: ACME
    postalCode: 27513
    st: NC
    street: PO BOX 55555
    telephoneNumber: 555-555-5555
    title: Mr. SAS Test2
    userPassword:: e1NTSEF9eitmMFFrTFN4OTd6OFpnN2tIU0l6RVZzTkt5Wnppa3M=

    dn: ou=groups,dc=acme,dc=com
    objectClass: top
    objectClass: organizationalUnit
    ou: groups

    dn: cn=LDAPSASAdminGroup,ou=groups,dc=acme,dc=com
    objectClass: groupOfUniqueNames
    cn: LDAPSASAdminGroup
    uniqueMember: uid=sasadm,ou=users,dc=acme,dc=com

    dn: cn=LDAPTestGroup1,ou=groups,dc=acme,dc=com
    objectClass: groupOfUniqueNames
    cn: LDAPTestGroup1
    uniqueMember: uid=sastest1,ou=users,dc=acme,dc=com

    dn: cn=LDAPTestGroup2,ou=groups,dc=acme,dc=com
    objectClass: groupOfUniqueNames
    cn: LDAPTestGroup2
    uniqueMember: uid=sastest2,ou=users,dc=acme,dc=com

    dn: cn=LDAPNonAdminGroup,ou=groups,dc=acme,dc=com
    objectClass: groupOfUniqueNames
    cn: LDAPNonAdminGroup
    uniqueMember: uid=sastest1,ou=users,dc=acme,dc=com
    uniqueMember: uid=sastest2,ou=users,dc=acme,dc=com
    uniqueMember: uid=sasdemo,ou=users,dc=acme,dc=com



���������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������ldap-basic/03-openldap-deployment.yml���������������������������������������������������������������0000777�0000000�0000000�00000003346�14326304517�014710� 0����������������������������������������������������������������������������������������������������ustar  ��������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: openldap-server
  labels:
    app: openldap-server
spec:
  replicas: 1
  selector:
    matchLabels:
      app: openldap-server
  template:
    metadata:
      labels:
        app: openldap-server
    spec:
      containers:
        - name: openldap-server
          image: osixia/openldap:stable
          imagePullPolicy: IfNotPresent
          args:
            - --copy-service
          volumeMounts:
            - name: openldap-volume
              mountPath: /container/service/slapd/assets/config/bootstrap/ldif/custom/bootstrap.ldif
              subPath: bootstrap.ldif
            - name: ldap-data
              mountPath: /var/lib/ldap
            - name: ldap-config
              mountPath: /etc/ldap/slapd.d
            - name: ldap-certs
              mountPath: /container/service/slapd/assets/certs
          ports:
            - containerPort: 389
              name: openldap
            - containerPort: 636
              name: openldaps
          env:
            - name: LDAP_TLS
              value: "false"
            - name: LDAP_ORGANISATION
              value: "ACME"
            - name: LDAP_DOMAIN
              value: "acme.com"
            - name: LDAP_ADMIN_PASSWORD
              value: "lnxsas"
            - name: LDAP_CONFIG_PASSWORD
              value: "lnxsas"
            - name: LDAP_READONLY_USER
              value: "false"
            - name: LDAP_REMOVE_CONFIG_AFTER_SETUP
              value: "false"
      volumes:
        - name: openldap-volume
          configMap:
            name: openldap-bootstrap
        - name: ldap-data
          emptyDir: {}
        - name: ldap-config
          emptyDir: {}
        - name: ldap-certs
          emptyDir: {}
������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������ldap-basic/04-openldap-service.yml������������������������������������������������������������������0000777�0000000�0000000�00000000371�13640742343�014165� 0����������������������������������������������������������������������������������������������������ustar  ��������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������---
apiVersion: v1
kind: Service
metadata:
  labels:
    app: openldap-service
  name: openldap-service
spec:
  ports:
    - name: openldap-insecure-port
      port: 389
      targetPort: 389
      protocol: TCP
  selector:
    app: openldap-server
���������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������������
